# 🛡️ セキュリティガイドライン

## 📋 セキュリティポリシー

RadicalxChange Quadratic Voting System は、民主的意思決定を支援する重要なツールです。  
このプロジェクトのセキュリティを維持するため、以下のガイドラインに従ってください。

## 🚨 脆弱性の報告

### 報告方法
セキュリティ上の問題を発見した場合は、以下の方法で報告してください：

1. **GitHub Security Advisory**（推奨）
   - プライベートな報告が可能
   - 適切な修正まで非公開

2. **GitHub Issue**
   - 深刻でない問題の場合
   - 公開での議論が適切な場合

### 報告時の注意事項
- 🔒 **機密情報を含めない**: 実際の認証情報やAPIキーを記載しない
- 📋 **再現手順を明確に**: 問題を再現できる詳細な手順を記載
- 🎯 **影響範囲を明示**: どの機能や認証方式に影響するかを説明

## 🔐 認証セキュリティ

### 対応認証方式
- **個別投票**: UUID識別子による匿名投票
- **Google認証**: OAuth 2.0による安全な認証
- **LINE認証**: LINE Login APIによる認証

### セキュリティ対策
1. **重複投票防止**
   - イベント + ユーザーIDでの一意性制約
   - 複数認証方式での重複チェック

2. **セッション管理**
   - JWT形式の安全なセッション
   - 適切な有効期限設定

3. **レート制限**
   - 10分間に20回の投票試行制限
   - 実験参加者の利便性を考慮

## 🔒 データ保護

### 個人情報の取り扱い
- **最小限の情報のみ取得**: 投票に必要な情報のみ
- **適切な暗号化**: 機密データの暗号化
- **アクセス制御**: 適切な権限管理

### 実証実験での注意事項
- 📊 **データエクスポート**: 個人情報の適切な匿名化
- 🔒 **バックアップ**: 暗号化されたバックアップ
- 🗑️ **データ削除**: 実験終了後の適切なデータ削除

## 🌐 環境設定のセキュリティ

### 必須設定
```env
# 強力なランダムシークレット
NEXTAUTH_SECRET=your-very-strong-random-secret

# 適切なURL設定
NEXTAUTH_URL=https://your-domain.com

# 安全なデータベース接続
DATABASE_URL=postgresql://user:password@localhost:5432/db
```

### 推奨設定
- 🔐 **強力なパスワード**: 複雑なデータベースパスワード
- 🌐 **HTTPS**: 本番環境での必須使用
- 🔒 **環境変数の保護**: `.env` ファイルの適切な管理

## 🛠️ 開発時のセキュリティ

### 推奨プラクティス
1. **依存関係の管理**
   - 定期的な依存関係の更新
   - 脆弱性スキャンの実施

2. **コードレビュー**
   - セキュリティを考慮したレビュー
   - 機密情報の混入チェック

3. **テスト**
   - セキュリティテストの実施
   - 認証フローの包括的テスト

### 避けるべきこと
- ❌ **機密情報のハードコード**: 認証情報の直接記載
- ❌ **不適切なログ出力**: 機密情報のコンソール出力
- ❌ **不必要な権限**: 過度なアクセス権限の付与

## 📚 ライセンス関連セキュリティ

### CC BY-NC 2.0 準拠
- ✅ **非営利目的のみ**: 商用利用の禁止
- ✅ **適切な表示**: 著作者クレジットの表示
- ✅ **再配布の条件**: 同じライセンスでの再配布

### 使用時の注意
- 🏢 **企業での使用**: 営利目的での使用は禁止
- 🎓 **教育機関**: 研究・教育目的での使用は許可
- 🏛️ **非営利組織**: NPO・NGOでの使用は許可

## 🚀 実証実験でのセキュリティ

### 大規模実験（1000名以上）
- 📊 **負荷分散**: 適切なサーバー負荷分散
- 🔒 **データ整合性**: 投票データの整合性チェック
- 👥 **参加者管理**: 適切な参加者識別

### 推奨構成
```
負荷分散 → Webサーバー → データベース
    ↓           ↓           ↓
セキュリティ   認証管理    暗号化
```

## 📞 サポート・連絡先

### 緊急時の連絡
- **GitHub Issues**: 一般的な問題報告
- **Security Advisory**: 機密性の高い脆弱性報告

### 実証実験サポート
- **実験前**: セキュリティ設定の確認
- **実験中**: 監視・サポート
- **実験後**: データ処理・削除支援

## 🔄 更新履歴

- **2025年1月**: 初版作成
- **対象バージョン**: v2.2（実証実験対応版）

---

*このプロジェクトは、民主的意思決定ツールとして多くの人に安全に使用されることを目指しています。  
セキュリティに関するご質問やご報告をお待ちしています。* 